<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>Trocas de DVDS</title>
    </h:head>
    <h:body>
        <h1>Dvdteca</h1>
        <h:form>
            <p:menubar>
                <p:menuitem value="Meus DVDs" outcome="listaReservas" icon="ui-icon-search"></p:menuitem>
                <p:menuitem value="Logout" action="#{loginControle.fazerLogout()}" icon="ui-icon-close" />
                
            </p:menubar>
            <br/>
            <p:dataTable widgetVar="Lista de DVDS" var="dvd" value="#{dvdsControle.listaDeDvds}">
                <f:facet name="header"> Lista de DVDS </f:facet>
            
                <p:column sortBy="#{dvd.titulo}" filterBy="#{dvd.titulo}">
                    <f:facet name="header" >Titulo</f:facet>
                    <h:outputText value="#{dvd.titulo}"></h:outputText>
                </p:column>
                
                <p:column sortBy="#{dvd.genero}" filterBy="#{dvd.genero}">
                    <f:facet name="header" >Genero</f:facet>
                    <h:outputText value="#{dvd.genero}"></h:outputText>
                </p:column>
                
                <p:column sortBy="#{dvd.ano}" filterBy="#{dvd.ano}">
                    <f:facet name="header" >Ano</f:facet>
                    <h:outputText value="#{dvd.ano}"> <f:convertDateTime pattern="d-MM-yyyy" /> </h:outputText>
                </p:column>
                
                <p:column sortBy="#{dvd.emprestado}" filterBy="#{dvd.emprestado}">
                    <f:facet name="header" >Emprestado para</f:facet>
                    <h:outputText value="#{dvd.emprestado.nome}"></h:outputText>
                </p:column>

                <p:column headerText="Emprestar">
                    <p:commandButton value="Emprestar" action="#{dvdsControle.emprestar(dvd, loginControle.userBO)}" actionListener="#{dvdsControle.reload()}" ></p:commandButton>
                </p:column>
                                    
            </p:dataTable>  
            
            <h1>DVD's que foram emprestados para voce</h1>
            <p:dataTable widgetVar="Lista de DVDS" var="dvd" value="#{dvdsControle.listaDeDvds}">
                <p:column sortBy="#{dvd.titulo}" filterBy="#{dvd.titulo}">
                    <f:facet name="header" >Titulo</f:facet>
                    <h:outputText value="#{dvd.titulo}"></h:outputText>
                </p:column>
                
                <p:column sortBy="#{dvd.genero}" filterBy="#{dvd.genero}">
                    <f:facet name="header" >Genero</f:facet>
                    <h:outputText value="#{dvd.genero}"></h:outputText>
                </p:column>
                
                <p:column sortBy="#{dvd.ano}" filterBy="#{dvd.ano}">
                    <f:facet name="header" >Ano</f:facet>
                    <h:outputText value="#{dvd.ano}"></h:outputText>
                </p:column>
                                
                <p:column sortBy="#{dvd.fkidCliente}" filterBy="#{dvd.fkidCliente}">
                    <f:facet name="header" >Emprestado por</f:facet>
                    <h:outputText value="#{dvd.fkidCliente.nome}"></h:outputText>
                </p:column>
                
                <p:column headerText="Devolver">
                    <p:commandButton value="Devolver" action="#{dvdsControle.devolver(dvd)}" actionListener="#{dvdsControle.reload()}" ></p:commandButton>
                </p:column>
            </p:dataTable>
        </h:form>    
    </h:body>
</html>
                
 
                    

